(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{14:function(e,a,t){e.exports={overlay:"Modal_overlay__2bYWm",modal:"Modal_modal__yjbQJ"}},26:function(e,a,t){e.exports={btn:"Button_btn__3j26J"}},28:function(e,a,t){e.exports={loader:"Loader_loader__18VuK"}},30:function(e,a,t){e.exports=t(75)},4:function(e,a,t){e.exports={searchbar:"Searchbar_searchbar__2RlXz",searchForm:"Searchbar_searchForm__3RpGB","searchForm-button":"Searchbar_searchForm-button__2Uy3v","searchForm-button-label":"Searchbar_searchForm-button-label__2IxuM","searchForm-input":"Searchbar_searchForm-input__2xR7T"}},6:function(e,a,t){e.exports={App:"ImageGalleryItem_App__1XNWU",imageGallery:"ImageGalleryItem_imageGallery__OrYbq",imageGalleryItem:"ImageGalleryItem_imageGalleryItem__Oui3d","imageGalleryItem-image":"ImageGalleryItem_imageGalleryItem-image__mVKfU"}},75:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(24),o=t.n(c),l=t(13),u=t(3),s=t.n(u),i=t(12),m=t(8),g=t(9),h=t(11),p=t(10),f=t(4),y=t.n(f),d=function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={query:""},e.handleChange=function(a){var t=a.target.value;e.setState({query:t})},e.handleSubmit=function(a){a.preventDefault(),e.props.onChangeQuery(e.state.query),e.reset()},e.reset=function(){e.setState({query:""})},e}return Object(g.a)(t,[{key:"render",value:function(){var e=this.state.query;return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:y.a.searchbar},n.a.createElement("form",{className:y.a.searchForm,onSubmit:this.handleSubmit},n.a.createElement("button",{type:"submit",className:y.a["searchForm-button"]},n.a.createElement("span",{className:y.a["searchForm-button-label"]},"Search")),n.a.createElement("input",{className:y.a["searchForm-input"],type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleChange,value:e}))))}}]),t}(r.Component),b=t(25),v=t.n(b),_=t(29),E=t(6),w=t.n(E),F=t(14),I=t.n(F),S=function(e){var a=e.closeModal,t=e.children,c=function(e){"Escape"===e.key&&a()};return Object(r.useEffect)((function(){return window.addEventListener("keydown",c),function(){window.removeEventListener("keydown",c)}})),n.a.createElement("div",{className:I.a.overlay,onClick:function(e){"IMG"!==e.target.nodeName&&a()}},n.a.createElement("div",{className:I.a.modal},n.a.createElement(n.a.Fragment,null,t)))},j=function(e){var a=e.url,t=e.alt,c=e.largeImageURL,o=Object(r.useState)(!1),l=Object(_.a)(o,2),u=l[0],s=l[1];return n.a.createElement("li",{className:w.a.imageGalleryItem},n.a.createElement("img",{src:a,alt:t,className:w.a["imageGalleryItem-image"],onClick:function(){return s(!0)}}),u&&n.a.createElement(S,{closeModal:function(){return s(!1)}},n.a.createElement("img",{src:c,alt:t})))},O=function(e){var a=e.gallery;return n.a.createElement(n.a.Fragment,null,n.a.createElement("ul",{className:w.a.imageGallery},a.map((function(e){var a=e.id,t=e.webformatURL,r=e.largeImageURL,c=e.tags;return n.a.createElement(j,{key:a,url:t,alt:c,largeImageURL:r})}))))},C=t(26),k=t.n(C),x=function(e){var a=e.pageChanger;return n.a.createElement("button",{type:"button",className:k.a.btn,onClick:a},"Load more")},q=t(27),G=t.n(q),L=t(28),N=t.n(L),R=(t(74),function(){return n.a.createElement("div",{className:N.a.loader},n.a.createElement(G.a,{type:"BallTriangle",color:"#00BFFF",height:80,width:80}))}),U="16030108-62f306d6543cc766a6e8f4e47",M=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=v.a.get("https://pixabay.com/api/?q=".concat(e,"&page=").concat(a,"&key=").concat(U,"&image_type=photo&orientation=horizontal&per_page=12"));return t},B=function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={gallery:[],query:"",page:1,isLoading:!1,error:!1},e.onChangeQuery=function(a){e.setState({query:a,page:1,gallery:[]})},e.fetchRequest=Object(i.a)(s.a.mark((function a(){var t,r,n,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.state,r=t.query,n=t.page,a.next=4,M(r,n);case 4:return c=a.sent,a.abrupt("return",c.data.hits);case 8:a.prev=8,a.t0=a.catch(0),e.setState({error:!0});case 11:case"end":return a.stop()}}),a,null,[[0,8]])}))),e.pageChanger=function(){e.setState((function(e){return{page:e.page+1}}))},e}return Object(g.a)(t,[{key:"componentDidUpdate",value:function(e,a){var t=this,r=this.state,n=r.query,c=r.page;n!==a.query&&(this.setState({isLoading:!0}),function(){var e=Object(i.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchRequest();case 2:a=e.sent,t.setState({gallery:Object(l.a)(a),isLoading:!1});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()());c!==a.page&&(this.setState({isLoading:!0}),function(){var e=Object(i.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchRequest();case 2:a=e.sent,t.setState((function(e){return{gallery:[].concat(Object(l.a)(e.gallery),Object(l.a)(a)),isLoading:!1}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()())}},{key:"render",value:function(){var e=this.state,a=e.gallery,t=e.isLoading,r=e.error;return n.a.createElement(n.a.Fragment,null,n.a.createElement(d,{onChangeQuery:this.onChangeQuery}),r&&n.a.createElement("h1",null,"something gone wrong, try again later"),!!a.length&&!r&&n.a.createElement(n.a.Fragment,null,n.a.createElement(O,{gallery:a}),!t&&n.a.createElement(x,{pageChanger:this.pageChanger})),t&&n.a.createElement(R,null))}}]),t}(r.Component);o.a.render(n.a.createElement(B,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.2fef7310.chunk.js.map